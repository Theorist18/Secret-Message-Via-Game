<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Maze Game</title>
<style>
  body {
    margin: 0;
    background: url('https://cdn.lospec.com/gallery/cats-in-the-blue-lake-731334.gif') no-repeat center center fixed;
    background-size: cover;
    font-family: Arial, sans-serif;
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }

  #game {
    display: grid;
    grid-template-columns: repeat(13, 1fr);
    aspect-ratio: 1 / 1;
    width: 90vmin;
    max-width: 600px;
    margin-top: 20px;
    gap: 2px;
    user-select: none;
  }

  .cell {
    aspect-ratio: 1 / 1;
    font-size: clamp(1rem, 2.5vmin, 2rem);
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .wall { background-color: #004080; }
  .player { background-color: #1E90FF; font-size: clamp(1.2rem, 3vmin, 2.2rem); }
  .monster { background-color: #800000; font-size: clamp(1rem, 2.5vmin, 2rem); }
  .key { background-color: #FFD700; }
  .door { background-color: #654321; }
  .target { background-color: black; font-size: clamp(1rem, 2.5vmin, 2rem); }
  .coffee { background-color: #6F4E37; font-size: clamp(1rem, 2.5vmin, 2rem); }
  .cookie { background-color: #D2691E; font-size: clamp(1rem, 2.5vmin, 2rem); }

  #mobile-controls {
    text-align: center;
    margin: 20px 0 40px;
    user-select: none;
  }

  #mobile-controls button {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    width: clamp(50px, 12vw, 80px);
    height: clamp(50px, 12vw, 80px);
    margin: 5px;
    border-radius: 12px;
    border: none;
    background-color: #007BFF;
    color: white;
    box-shadow: 0 3px 5px rgba(0,0,0,0.3);
    touch-action: manipulation;
    transition: background-color 0.2s ease;
  }

  #mobile-controls button:active {
    background-color: #0056b3;
  }

  /* Optional: center mobile controls buttons on small screens */
  #mobile-controls button#left,
  #mobile-controls button#right {
    vertical-align: middle;
  }
</style>
</head>
<body>

<div id="game"></div>

<div id="mobile-controls">
  <button id="up">‚¨ÜÔ∏è</button><br/>
  <button id="left">‚¨ÖÔ∏è</button>
  <button id="down">‚¨áÔ∏è</button>
  <button id="right">‚û°Ô∏è</button>
</div>

<!-- Sounds -->
<audio id="moveSound" src="https://freesound.org/data/previews/256/256113_3263906-lq.mp3"></audio>
<audio id="keySound" src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3"></audio>
<audio id="doorSound" src="https://freesound.org/data/previews/85/85921_1022656-lq.mp3"></audio>
<audio id="winSound" src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3"></audio>
<audio id="hitSound" src="https://freesound.org/data/previews/341/341695_5121236-lq.mp3"></audio>
<audio id="coffeeSound" src="https://freesound.org/data/previews/33/33781_634166-lq.mp3"></audio>

<script>
  const maze = [
    ['#','#','#','#','#','#','P','#','#','#','#','#','#'],
    ['#','.','.','‚òï','.','#','.','.','.','#','.','üîë','#'],
    ['#','.','#','.','#','#','#','#','.','#','.','.','#'],
    ['#','.','#','.','.','#','.','#','.','#','.','#','#'],
    ['#','.','#','#','.','#','.','#','.','#','.','#','#'],
    ['#','.','.','#','.','#','.','#','.','#','.','#','#'],
    ['#','.','.','#','.','#','.','.','.','#','.','#','#'],
    ['#','.','.','.','.','#','.','#','#','#','.','.','#'],
    ['#','#','#','.','.','.','.','.','.','.','.','.','#'],
    ['#','.','.','.','.','#','.','.','.','#','#','.','#'],
    ['#','.','#','#','üö™','#','#','#','.','#','#','.','#'],
    ['#','.','.','#','.','.','.','#','.','.','.','üç™','#'],
    ['#','#','#','#','#','#','üñ§','#','#','#','#','#','#']
  ];

  let playerPos = { x: 6, y: 0 };
  let monsterPos = { x: 5, y: 5 };
  let hasCookie = false;
  let hasCoffee = false;
  let hasKey = false;
  let gameOver = false;

  const gameContainer = document.getElementById('game');
  const moveSound = document.getElementById('moveSound');
  const keySound = document.getElementById('keySound');
  const doorSound = document.getElementById('doorSound');
  const winSound = document.getElementById('winSound');
  const hitSound = document.getElementById('hitSound');
  const coffeeSound = document.getElementById('coffeeSound');

  function renderMaze() {
    gameContainer.innerHTML = '';
    for (let y = 0; y < maze.length; y++) {
      for (let x = 0; x < maze[y].length; x++) {
        const cell = document.createElement('div');
        cell.classList.add('cell');
        const value = maze[y][x];

        if (value === '#') cell.classList.add('wall');
        else if (value === 'P') {
          cell.classList.add('player');
          cell.textContent = gameOver ? 'üíî' : 'üíô';
        }
        else if (value === 'üî®') {
          cell.classList.add('monster');
          cell.textContent = 'üî®';
        }
        else if (value === 'üñ§') {
          cell.classList.add('target');
          cell.textContent = 'üñ§';
        }
        else if (value === 'üîë') {
          cell.classList.add('key');
          cell.textContent = 'üîë';
        }
        else if (value === 'üö™') {
          cell.classList.add('door');
          cell.textContent = 'üö™';
        }
        else if (value === '‚òï') {
          cell.classList.add('coffee');
          cell.textContent = '‚òï';
        }
        else if (value === 'üç™') {
          cell.classList.add('cookie');
          cell.textContent = 'üç™';
        } else {
          cell.textContent = '';
        }

        gameContainer.appendChild(cell);
      }
    }
  }

  function movePlayer(dx, dy) {
    if (gameOver) return;

    const newX = playerPos.x + dx;
    const newY = playerPos.y + dy;
    const destination = maze[newY]?.[newX];

    if (!destination || destination === '#' || destination === 'üî®') return;

    if (destination === 'üç™') {
      hasCookie = true;
      alert('üç™ Cookie consumed!');
    }

    if (destination === '‚òï') {
      if (!hasCookie) {
        alert('‚òï You need to eat the cookie first!');
        return;
      }
      hasCoffee = true;
      coffeeSound.currentTime = 0;
      coffeeSound.play();
      alert('‚òï Coffee drank!');
    }

    if (destination === 'üîë') {
      if (!hasCoffee) {
        alert('üîë You need to drink coffee before grabbing the key!');
        return;
      }
      hasKey = true;
      keySound.currentTime = 0;
      keySound.play();
      alert('üîë Key picked up!');
    }

    if (destination === 'üö™') {
      if (hasKey) {
        maze[newY][newX] = '.';
        doorSound.currentTime = 0;
        doorSound.play();
        alert('üö™ Door unlocked!');
      } else {
        alert('üö™ The door is locked. You need the key!');
        return;
      }
    }

    if (destination === 'üñ§') {
      winSound.currentTime = 0;
      winSound.play();
      setTimeout(() => {
        alert('üíô You reached the black heart! üñ§');
        window.location.href = "https://theorist18.github.io/Secret-Message/";
      }, 500);
    }

    maze[playerPos.y][playerPos.x] = '.';
    playerPos = { x: newX, y: newY };
    maze[newY][newX] = 'P';
    moveSound.currentTime = 0;
    moveSound.play();
    renderMaze();
  }

  function moveMonster() {
    if (gameOver) return;

    const directions = [
      { dx: 1, dy: 0 },
      { dx: -1, dy: 0 },
      { dx: 0, dy: 1 },
      { dx: 0, dy: -1 }
    ];
    directions.sort(() => Math.random() - 0.5);

    for (let { dx, dy } of directions) {
      const newX = monsterPos.x + dx;
      const newY = monsterPos.y + dy;
      const next = maze[newY]?.[newX];
      if (next && next !== '#' && next !== 'üî®') {
        if (next === 'P') {
          hitSound.currentTime = 0;
          hitSound.play();
          gameOver = true;
          maze[monsterPos.y][monsterPos.x] = '.';
          maze[newY][newX] = 'P';
          playerPos = { x: newX, y: newY };
          renderMaze();
          setTimeout(() => alert("üíî You were caught by the monster! Game Over!"), 100);
          return;
        }
        maze[monsterPos.y][monsterPos.x] = '.';
        monsterPos = { x: newX, y: newY };
        maze[newY][newX] = 'üî®';
        renderMaze();
        return;
      }
    }
  }

  document.addEventListener('keydown', (e) => {
    if (gameOver) return;
    switch (e.key) {
      case 'ArrowLeft': movePlayer(-1, 0); break;
      case 'ArrowRight': movePlayer(1, 0); break;
      case 'ArrowUp': movePlayer(0, -1); break;
      case 'ArrowDown': movePlayer(0, 1); break;
    }
  });

  document.getElementById('up').addEventListener('click', () => movePlayer(0, -1));
  document.getElementById('left').addEventListener('click', () => movePlayer(-1, 0));
  document.getElementById('down').addEventListener('click', () => movePlayer(0, 1));
  document.getElementById('right').addEventListener('click', () => movePlayer(1, 0));

  maze[monsterPos.y][monsterPos.x] = 'üî®';
  renderMaze();
  setInterval(moveMonster, 1000);
</script>
</body>
</html>

